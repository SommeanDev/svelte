var je=t=>{throw TypeError(t)};var Ne=(t,e,a)=>e.has(t)||je("Cannot "+a);var de=(t,e,a)=>(Ne(t,e,"read from private field"),a?a.call(t):e.get(t)),ue=(t,e,a)=>e.has(t)?je("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),ve=(t,e,a,s)=>(Ne(t,e,"write to private field"),s?s.call(t,a):e.set(t,a),a);import{t as R,a as N,d as re}from"../chunks/Sk8rondT.js";import{b as xt,d as kt,k as me,h as q,m as At,F as Et,B as c,Z as St,I as Tt,J as We,j as pe,l as X,ae as Mt,K as it,M as lt,O as Ct,aw as he,ai as ot,a7 as Ue,V as Pt,ax as Ae,ay as Se,az as zt,ah as Ht,aA as Lt,au as jt,aB as Te,aC as Nt,i as Wt,ab as Ut,aD as ct,a9 as It,aE as Ie,aF as Dt,an as Ot,q as ft,ao as dt,C as Rt,aG as Ft,R as Ee,aH as qt,ar as Bt,p as Jt,as as L,s as D,f as be,t as K,a as Kt,$ as Vt,c as F,aI as Gt,r as U}from"../chunks/DlCOA05K.js";import{o as Qt,d as Yt,e as Xt,s as Z}from"../chunks/CX4tAxLR.js";import{p as Zt,i as Q}from"../chunks/rVNwLq-7.js";import{h as $t}from"../chunks/DGzMlDlD.js";import{r as ea,a as De,s as Oe}from"../chunks/DuHcmTd6.js";import{t as ta,c as aa}from"../chunks/BRzKQYUk.js";import{i as ra,a as sa,b as na,c as ia}from"../chunks/Dktdgy8O.js";function la(t,e){return e}function oa(t,e,a,s){for(var n=[],d=e.length,f=0;f<d;f++)zt(e[f].e,n,!0);var h=d>0&&n.length===0&&a!==null;if(h){var y=a.parentNode;Ht(y),y.append(a),s.clear(),J(t,e[0].prev,e[d-1].next)}Lt(n,()=>{for(var w=0;w<d;w++){var _=e[w];h||(s.delete(_.k),J(t,_.prev,_.next)),jt(_.e,!h)}})}function se(t,e,a,s,n,d=null){var f=t,h={flags:e,items:new Map,first:null},y=(e&ct)!==0;if(y){var w=t;f=q?me(At(w)):w.appendChild(xt())}q&&Et();var _=null,H=!1,v=St(()=>{var b=a();return Ut(b)?b:b==null?[]:ot(b)});kt(()=>{var b=c(v),l=b.length;if(H&&l===0)return;H=l===0;let C=!1;if(q){var S=f.data===Tt;S!==(l===0)&&(f=We(),me(f),pe(!1),C=!0)}if(q){for(var A=null,M,u=0;u<l;u++){if(X.nodeType===8&&X.data===Mt){f=X,C=!0,pe(!1);break}var r=b[u],p=s(r,u);M=ut(X,h,A,null,r,p,u,n,e,a),h.items.set(p,M),A=M}l>0&&me(We())}q||ca(b,h,f,n,e,s,a),d!==null&&(l===0?_?it(_):_=lt(()=>d(f)):_!==null&&Ct(_,()=>{_=null})),C&&pe(!0),c(v)}),q&&(f=X)}function ca(t,e,a,s,n,d,f){var P,I,z,T;var h=(n&Dt)!==0,y=(n&(Te|Se))!==0,w=t.length,_=e.items,H=e.first,v=H,b,l=null,C,S=[],A=[],M,u,r,p;if(h)for(p=0;p<w;p+=1)M=t[p],u=d(M,p),r=_.get(u),r!==void 0&&((P=r.a)==null||P.measure(),(C??(C=new Set)).add(r));for(p=0;p<w;p+=1){if(M=t[p],u=d(M,p),r=_.get(u),r===void 0){var o=v?v.e.nodes_start:a;l=ut(o,e,l,l===null?e.first:l.next,M,u,p,s,n,f),_.set(u,l),S=[],A=[],v=l.next;continue}if(y&&fa(r,M,p,n),(r.e.f&he)!==0&&(it(r.e),h&&((I=r.a)==null||I.unfix(),(C??(C=new Set)).delete(r))),r!==v){if(b!==void 0&&b.has(r)){if(S.length<A.length){var i=A[0],m;l=i.prev;var x=S[0],E=S[S.length-1];for(m=0;m<S.length;m+=1)Re(S[m],i,a);for(m=0;m<A.length;m+=1)b.delete(A[m]);J(e,x.prev,E.next),J(e,l,x),J(e,E,i),v=i,l=E,p-=1,S=[],A=[]}else b.delete(r),Re(r,v,a),J(e,r.prev,r.next),J(e,r,l===null?e.first:l.next),J(e,l,r),l=r;continue}for(S=[],A=[];v!==null&&v.k!==u;)(v.e.f&he)===0&&(b??(b=new Set)).add(v),A.push(v),v=v.next;if(v===null)continue;r=v}S.push(r),l=r,v=r.next}if(v!==null||b!==void 0){for(var k=b===void 0?[]:ot(b);v!==null;)(v.e.f&he)===0&&k.push(v),v=v.next;var g=k.length;if(g>0){var W=(n&ct)!==0&&w===0?a:null;if(h){for(p=0;p<g;p+=1)(z=k[p].a)==null||z.measure();for(p=0;p<g;p+=1)(T=k[p].a)==null||T.fix()}oa(e,k,W,_)}}h&&It(()=>{var B;if(C!==void 0)for(r of C)(B=r.a)==null||B.apply()}),Ue.first=e.first&&e.first.e,Ue.last=l&&l.e}function fa(t,e,a,s){(s&Te)!==0&&Ie(t.v,e),(s&Se)!==0?Ie(t.i,a):t.i=a}function ut(t,e,a,s,n,d,f,h,y,w){var _=(y&Te)!==0,H=(y&Nt)===0,v=_?H?Pt(n):Ae(n):n,b=(y&Se)===0?f:Ae(f),l={i:b,v,k:d,a:null,e:null,prev:a,next:s};try{return l.e=lt(()=>h(t,v,b,w),q),l.e.prev=a&&a.e,l.e.next=s&&s.e,a===null?e.first=l:(a.next=l,a.e.next=l.e),s!==null&&(s.prev=l,s.e.prev=l.e),l}finally{}}function Re(t,e,a){for(var s=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,d=t.e.nodes_start;d!==s;){var f=Wt(d);n.before(d),d=f}}function J(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Fe(t,e,a){Ot(()=>{var s=ft(()=>e(t,a==null?void 0:a())||{});if(a&&(s!=null&&s.update)){var n=!1,d={};dt(()=>{var f=a();Rt(f),n&&Ft(d,f)&&(d=f,s.update(f))}),n=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function $(t,e,a,s,n,d){var f=t.__className;if(q||f!==a||f===void 0){var h=ta(a,s,d);(!q||h!==t.getAttribute("class"))&&(h==null?t.removeAttribute("class"):t.className=h),t.__className=a}else if(d&&n!==d)for(var y in d){var w=!!d[y];(n==null||w!==!!n[y])&&t.classList.toggle(y,w)}return d}function da(t){Ee(t,t.v+1)}function ua(t){let e=0,a=Ae(0),s;return()=>{qt()&&(c(a),dt(()=>(e===0&&(s=ft(()=>t(()=>da(a)))),e+=1,()=>{Bt().then(()=>{e-=1,e===0&&(s==null||s(),s=void 0)})})))}}var te,ae;class va{constructor(e,a){ue(this,te);ue(this,ae);ve(this,te,e),ve(this,ae,ua(a))}get current(){return de(this,ae).call(this),de(this,te).call(this)}}te=new WeakMap,ae=new WeakMap;const ma=/\(.+\)/;class pa extends va{constructor(e,a){let s=ma.test(e)?e:`(${e})`;const n=window.matchMedia(s);super(()=>n.matches,d=>Qt(n,"change",d))}}function ha(t){const e=JSON.parse(t);return e.data&&(e.data=na(e.data,ia.decoders)),e}function ye(t){return HTMLElement.prototype.cloneNode.call(t)}function _e(t,e=()=>{}){const a=async({action:n,result:d,reset:f=!0,invalidateAll:h=!0})=>{d.type==="success"&&(f&&HTMLFormElement.prototype.reset.call(t),h&&await ra()),(location.origin+location.pathname===n.origin+n.pathname||d.type==="redirect"||d.type==="error")&&await sa(d)};async function s(n){var C,S,A,M,u;if(((C=n.submitter)!=null&&C.hasAttribute("formmethod")?n.submitter.formMethod:ye(t).method)!=="post")return;n.preventDefault();const f=new URL((S=n.submitter)!=null&&S.hasAttribute("formaction")?n.submitter.formAction:ye(t).action),h=(A=n.submitter)!=null&&A.hasAttribute("formenctype")?n.submitter.formEnctype:ye(t).enctype,y=new FormData(t),w=(M=n.submitter)==null?void 0:M.getAttribute("name");w&&y.append(w,((u=n.submitter)==null?void 0:u.getAttribute("value"))??"");const _=new AbortController;let H=!1;const b=await e({action:f,cancel:()=>H=!0,controller:_,formData:y,formElement:t,submitter:n.submitter})??a;if(H)return;let l;try{const r=new Headers({accept:"application/json","x-sveltekit-action":"true"});h!=="multipart/form-data"&&r.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(h)?h:"application/x-www-form-urlencoded");const p=h==="multipart/form-data"?y:new URLSearchParams(y),o=await fetch(f,{method:"POST",headers:r,cache:"no-store",body:p,signal:_.signal});l=ha(await o.text()),l.type==="error"&&(l.status=o.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;l={type:"error",error:r}}await b({action:f,formData:y,formElement:t,update:r=>a({action:f,result:l,reset:r==null?void 0:r.reset,invalidateAll:r==null?void 0:r.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",s),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",s)}}}var qe="mz3PUW_p",Be=["#FFC700","#FF0000","#2E3191","#41BBC7"],Je=3500,Ke=.5,Ve=150,Ge="mix",Qe=12,Ye="",Xe=!0,Ze=800,$e=1600;function ge(t,e={}){let{colors:a=Be,duration:s=Je,force:n=Ke,particleCount:d=Ve,particleShape:f=Ge,particleSize:h=Qe,particleClass:y=Ye,destroyAfterDone:w=Xe,stageHeight:_=Ze,stageWidth:H=$e}=e;(function(u){if(document.querySelector("style[data-neoconfetti]"))return;const r=we("style");r.dataset.neoconfetti="",r.textContent=u,xe(document.head,r)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",_+"px");let v=[],b=[];const l=()=>ee(O()*(wa-1)),C=(u,r)=>f!=="rectangles"&&(u==="circles"||xa(r));function S(u,r){const p=l(),o=C(f,p),i=(E,k)=>u.style.setProperty(E,k+"");i("--xlp",ke(ne(rt(r,90)-180),0,180,-H/2,H/2)+"px"),i("--dc",s-ee(1e3*O())+"ms");const m=O()<ya?Y(O()*_a,2):0;i("--x1",m),i("--x2",-1*m),i("--x3",m),i("--x4",Y(ne(ke(ne(rt(r,90)-180),0,180,-1,1)),4)),i("--y1",Y(O()*tt,4)),i("--y2",Y(O()*n*(vt()?1:-1),4)),i("--y3",tt),i("--y4",Y(ga(ke(ne(r-180),0,180,n,-n),0),4)),i("--w",(o?h:ee(4*O())+h/2)+"px"),i("--h",(o?h:ee(2*O())+h)+"px");const x=p.toString(2).padStart(3,"0").split("");i("--hr",x.map(E=>+E/2+"").join(" ")),i("--r",x.join(" ")),i("--rd",Y(O()*(ba-et)+et)+"ms"),i("--br",o?"50%":0)}let A;function M(){t.innerHTML="",clearTimeout(A),v=at(d,a),b=function(u,r=[],p){const o=[];for(const{color:i}of r){const m=we("div");m.className=`${qe} ${p}`,m.style.setProperty("--bgc",i);const x=we("div");xe(m,x),xe(u,m),o.push(m)}return o}(t,v,y);for(const[u,r]of st(b))S(r,v[+u].degree);A=setTimeout(()=>{w&&(t.innerHTML="")},s)}return M(),{update(u){const r=u.particleCount??Ve,p=u.particleShape??Ge,o=u.particleSize??Qe,i=u.particleClass??Ye,m=u.colors??Be,x=u.stageHeight??Ze,E=u.duration??Je,k=u.force??Ke,g=u.stageWidth??$e,W=u.destroyAfterDone??Xe;v=at(r,m);let P=!1;if(r===d){b=Array.from(t.querySelectorAll(`.${qe}`));for(const[I,{color:z}]of st(v)){const T=b[+I];JSON.stringify(a)!==JSON.stringify(m)&&T.style.setProperty("--bgc",z),p!==f&&T.style.setProperty("--br",C(p,l())?"50%":"0"),i!==y&&(y&&T.classList.remove(y),i&&T.classList.add(i))}}else P=!0;w&&!W&&clearTimeout(A),t.style.setProperty("--sh",x+"px"),s=E,a=m,n=k,d=r,f=p,h=o,y=i,w=W,_=x,H=g,P&&M()},destroy(){t.innerHTML="",clearTimeout(A)}}}var et=200,ba=800,ya=.1,_a=.3,tt=.5,ne=Math.abs,O=Math.random,ee=Math.round,ga=Math.max,we=t=>document.createElement(t),xe=(t,e)=>t.appendChild(e),at=(t,e)=>Array.from({length:t},(a,s)=>({color:e[s%e.length],degree:360*s/t})),Y=(t,e=2)=>ee((t+Number.EPSILON)*10**e)/10**e,ke=(t,e,a,s,n)=>(t-e)*(n-s)/(a-e)+s,rt=(t,e)=>t+e>360?t+e-360:t+e,vt=()=>O()>.5,st=Object.entries,wa=6,xa=t=>t!==1&&vt();function nt(t,e,a){var n;t.preventDefault();const s=t.target.getAttribute("data-key");s==="backspace"?(Ee(e,c(e).slice(0,-1),!0),(n=a())!=null&&n.badGuess&&a(a().badGuess=!1,!0)):c(e).length<5&&Ee(e,c(e)+s)}var ka=R('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Aa=R('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Ea=R('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Sa=R('<p class="svelte-1pg2j5l"> </p>'),Ta=R('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Ma=R('<button formaction="?/update" name="key"> </button>'),Ca=R('<div class="row svelte-1pg2j5l"></div>'),Pa=R('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),za=R('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Ha=R('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Fa(t,e){Jt(e,!0);let a=Zt(e,"form",15);const s=new pa("(prefers-reduced-motion: reduce)");let n=L(()=>e.data.answers.at(-1)==="xxxxx"),d=L(()=>c(n)?-1:e.data.answers.length),f=L(()=>e.data.guesses[c(d)]||""),h=L(()=>c(f).length===5);const y=L(()=>{let o={},i={};return e.data.answers.forEach((m,x)=>{const E=e.data.guesses[x];for(let k=0;k<5;k+=1){const g=E[k];m[k]==="x"?(o[g]="exact",i[g]="correct"):o[g]||(o[g]=m[k]==="c"?"close":"missing",i[g]=m[k]==="c"?"present":"absent")}}),{classnames:o,description:i}}),w=L(()=>c(y).classnames),_=L(()=>c(y).description);function H(o){var i;o.metaKey||o.key==="Enter"&&!c(h)||(i=document.querySelector(`[data-key="${o.key}" i]`))==null||i.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var v=Ha();Xt("keydown",Gt,H),$t(o=>{var i=ka();Vt.title="Sverdle",N(o,i)});var b=D(be(v),2),l=D(F(b),2);let C;se(l,20,()=>Array.from(Array(6).keys()),o=>o,(o,i)=>{var m=Ea();const x=L(()=>i===c(d));var E=be(m),k=F(E);U(E);var g=D(E,2);let W;se(g,20,()=>Array.from(Array(5).keys()),P=>P,(P,I)=>{var z=Aa();const T=L(()=>c(x)?c(f):e.data.guesses[i]),B=L(()=>{var j;return(j=e.data.answers[i])==null?void 0:j[I]}),Me=L(()=>{var j;return((j=c(T))==null?void 0:j[I])??""}),mt=L(()=>c(x)&&I===c(T).length),Ce=L(()=>c(B)==="x"),Pe=L(()=>c(B)==="c"),ze=L(()=>c(B)==="_");let He;var Le=F(z),ie=D(Le),pt=F(ie);{var ht=j=>{var oe=re("(correct)");N(j,oe)},bt=(j,oe)=>{{var yt=V=>{var ce=re("(present)");N(V,ce)},_t=(V,ce)=>{{var gt=G=>{var fe=re("(absent)");N(G,fe)},wt=G=>{var fe=re("empty");N(G,fe)};Q(V,G=>{c(ze)?G(gt):G(wt,!1)},ce)}};Q(j,V=>{c(Pe)?V(yt):V(_t,!1)},oe)}};Q(pt,j=>{c(Ce)?j(ht):j(bt,!1)})}U(ie);var le=D(ie,2);ea(le),U(z),K(j=>{He=$(z,1,"letter svelte-1pg2j5l",null,He,j),Z(Le,`${c(Me)??""} `),le.disabled=!c(x),De(le,c(Me))},[()=>({exact:c(Ce),close:c(Pe),missing:c(ze),selected:c(mt)})]),N(P,z)}),U(g),K(P=>{Z(k,`Row ${i+1}`),W=$(g,1,"row svelte-1pg2j5l",null,W,P)},[()=>({current:c(x)})]),N(o,m)}),U(l);var S=D(l,2),A=F(S);{var M=o=>{var i=Ta(),m=be(i);{var x=g=>{var W=Sa(),P=F(W);U(W),K(()=>Z(P,`the answer was "${e.data.answer??""}"`)),N(g,W)};Q(m,g=>{!c(n)&&e.data.answer&&g(x)})}var E=D(m,2),k=F(E);U(E),K(()=>Z(k,`${(c(n)?"you won :)":"game over :(")??""} play again?`)),N(o,i)},u=o=>{var i=Pa(),m=F(i);let x;var E=D(m,2);E.__click=[nt,f,a];var k=D(E,2);se(k,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],g=>g,(g,W)=>{var P=Ca();se(P,21,()=>W,la,(I,z)=>{var T=Ma();T.__click=[nt,f,a];var B=F(T,!0);U(T),K(()=>{Oe(T,"data-key",c(z)),$(T,1,aa(c(w)[c(z)]),"svelte-1pg2j5l"),T.disabled=c(h),De(T,c(z)),Oe(T,"aria-label",`${c(z)??""} ${c(_)[c(z)]||""}`),Z(B,c(z))}),N(I,T)}),U(P),N(g,P)}),U(i),K(g=>{m.disabled=!c(h),x=$(m,1,"svelte-1pg2j5l",null,x,g)},[()=>({selected:c(h)})]),N(o,i)};Q(A,o=>{c(n)||e.data.answers.length>=6?o(M):o(u,!1)})}U(S),U(b),Fe(b,(o,i)=>_e==null?void 0:_e(o,i),()=>()=>({update:o})=>{o({reset:!1})});var r=D(b,2);{var p=o=>{var i=za();Fe(i,(m,x)=>ge==null?void 0:ge(m,x),()=>({particleCount:s.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),N(o,i)};Q(r,o=>{c(n)&&o(p)})}K(o=>C=$(l,1,"grid svelte-1pg2j5l",null,C,o),[()=>{var o;return{playing:!c(n),"bad-guess":(o=a())==null?void 0:o.badGuess}}]),N(t,v),Kt()}Yt(["click"]);export{Fa as component};
